(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-035e6efe"],{"6be5":function(t,e,n){},a706:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-container"},[n("van-nav-bar",{attrs:{fixed:"","left-arrow":"",title:"文章详情"},on:{"click-left":function(e){return t.$router.back()}}}),t.loading?n("div",{staticClass:"loading"},[n("van-loading",{staticClass:"inner",attrs:{type:"spinner",color:"#1989fa"}})],1):t._e(),n("div",{staticClass:"detail"},[n("h3",{staticClass:"title"},[t._v(t._s(t.artDetail.title))]),n("div",{staticClass:"author"},[n("van-image",{attrs:{src:t.artDetail.aut_photo,round:"",width:"1rem",height:"1rem",fit:"cover"}}),n("div",{staticClass:"text"},[n("p",{staticClass:"name"},[t._v(t._s(t.artDetail.aut_name))]),n("p",{staticClass:"time"},[t._v(t._s(t._f("fromNow")(t.artDetail.pubdate)))])]),n("van-button",{attrs:{round:"",size:"small",type:t.artDetail.is_followed?"danger":"info"},on:{click:t.toggleFollow}},[t._v(" "+t._s(t.artDetail.is_followed?"取消关注":"+ 关注")+" ")])],1),n("div",{staticClass:"content"},[n("div",{domProps:{innerHTML:t._s(t.artDetail.content)}})]),n("van-divider",{style:{color:"#1989fa",borderColor:"#1989fa",padding:"0 16px"}},[t._v("END")]),n("div",{staticClass:"zan"},[n("van-button",{attrs:{round:"",size:"small",hairline:"",type:"primary",plain:"",icon:1===t.artDetail.attitude?"good-job":"good-job-o"},on:{click:t.like}},[t._v(" "+t._s(1===t.artDetail.attitude?"取消":"点赞")+" ")]),t._v("      "),n("van-button",{attrs:{round:"",size:"small",hairline:"",type:"danger",plain:"",icon:0===t.artDetail.attitude?"delete":"delete-o"},on:{click:t.dislike}},[t._v(" "+t._s(0===t.artDetail.attitude?"取消":"不喜欢")+" ")])],1)],1),n("Comment")],1)},r=[],i=n("1da1"),o=n("5530"),s=(n("96cf"),n("2423")),c=n("c24f"),l=n("2f62"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-comments"},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.commentList,(function(e){return n("van-cell",{key:e.com_id.toString()},[n("van-image",{staticStyle:{"margin-right":"10px"},attrs:{slot:"icon",round:"",width:"30",height:"30",src:e.aut_photo},slot:"icon"}),n("span",{staticStyle:{color:"#466b9d"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.aut_name))]),n("div",{attrs:{slot:"label"},slot:"label"},[n("p",{staticStyle:{color:"#363636"}},[t._v(t._s(e.content))]),n("p",[n("span",{staticStyle:{"margin-right":"10px"}},[t._v(" "+t._s(t._f("fromNow")(e.pubdate))+" ")]),n("van-button",{attrs:{size:"mini",type:"default"},on:{click:function(n){return t.showReply(e)}}},[t._v(" 回复 ("+t._s(e.reply_count)+") ")])],1)]),n("van-icon",{attrs:{slot:"right-icon",name:e.is_liking?"like":"like-o"},on:{click:function(n){return t.zan(e)}},slot:"right-icon"})],1)})),1),n("van-cell-group",{staticClass:"publish-wrap"},[n("van-field",{attrs:{clearable:"",placeholder:"请输入评论内容"},model:{value:t.content,callback:function(e){t.content="string"===typeof e?e.trim():e},expression:"content"}},[n("van-button",{attrs:{slot:"button",size:"mini",type:"info"},on:{click:t.addComment},slot:"button"},[t._v(" 发布 ")])],1)],1),n("van-action-sheet",{staticStyle:{height:"66%"},attrs:{title:"评论回复"},model:{value:t.isShowReply,callback:function(e){t.isShowReply=e},expression:"isShowReply"}},[t.isShowReply?n("CommentReply",{attrs:{comment:t.currentComment},on:{addCount:t.addCount}}):t._e()],1)],1)},d=[],f=n("2909"),m=(n("99af"),n("d3b7"),n("25f0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-comments"},[n("van-cell",{attrs:{title:"当前评论",border:!1}},[n("van-image",{staticStyle:{"margin-right":"10px"},attrs:{slot:"icon",round:"",width:"30",height:"30",src:t.comment.aut_photo},slot:"icon"}),n("span",{staticStyle:{color:"#466b9d"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.comment.aut_name))]),n("div",{attrs:{slot:"label"},slot:"label"},[n("p",{staticStyle:{color:"#363636"}},[t._v(t._s(t.comment.content))]),n("p",[n("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(t._f("fromNow")(t.comment.pubdate)))])])]),n("van-icon",{attrs:{slot:"right-icon"},slot:"right-icon"})],1),n("van-divider",[t._v("全部回复")]),n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.replyList,(function(e,a){return n("van-cell",{key:a},[n("van-image",{staticStyle:{"margin-right":"10px"},attrs:{slot:"icon",round:"",width:"30",height:"30",src:e.aut_photo},slot:"icon"}),n("span",{staticStyle:{color:"#466b9d"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.aut_name))]),n("div",{attrs:{slot:"label"},slot:"label"},[n("p",{staticStyle:{color:"#363636"}},[t._v(t._s(e.content))]),n("p",[n("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(t._f("fromNow")(e.pubdate)))])])])],1)})),1),n("van-cell-group",{staticClass:"publish-wrap"},[n("van-field",{attrs:{clearable:"",placeholder:"请输入回复内容"},model:{value:t.content,callback:function(e){t.content="string"===typeof e?e.trim():e},expression:"content"}},[n("van-button",{attrs:{slot:"button",size:"mini",type:"info"},on:{click:t.addReply},slot:"button"},[t._v("发布")])],1)],1)],1)}),p=[],h={props:{comment:{type:Object,required:!0}},data:function(){return{replyList:[],loading:!1,finished:!1,offset:null,content:""}},methods:{onLoad:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["k"])(t.comment.com_id.toString(),t.offset);case 2:n=e.sent,t.replyList=[].concat(Object(f["a"])(t.replyList),Object(f["a"])(n.data.results)),t.offset=n.data.last_id,t.loading=!1,0===n.data.results.length&&(t.finished=!0);case 7:case"end":return e.stop()}}),e)})))()},addReply:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.content){e.next=2;break}return e.abrupt("return",t.$toast("请输入回复内容"));case 2:return e.next=4,Object(s["c"])(t.comment.com_id.toString(),t.content,t.$route.params.id);case 4:n=e.sent,t.replyList.unshift(n.data.new_obj),t.$toast.success("回复成功"),t.content="",t.$emit("addCount");case 9:case"end":return e.stop()}}),e)})))()}}},b=h,v=(n("a82d"),n("2877")),g=Object(v["a"])(b,m,p,!1,null,"836cb340",null),_=g.exports,k={components:{CommentReply:_},data:function(){return{commentList:[],loading:!1,finished:!1,offset:null,content:"",isShowReply:!1,currentComment:{}}},computed:{artId:function(){return this.$route.params.id}},methods:{onLoad:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["j"])(t.artId,t.offset);case 2:n=e.sent,t.commentList=[].concat(Object(f["a"])(t.commentList),Object(f["a"])(n.data.results)),t.offset=n.data.last_id,t.loading=!1,0===n.data.results.length&&(t.finished=!0);case 7:case"end":return e.stop()}}),e)})))()},addComment:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.content){e.next=2;break}return e.abrupt("return",t.$toast("请输入评论内容"));case 2:return e.next=4,Object(s["a"])(t.artId,t.content);case 4:n=e.sent,t.$toast.success("添加评论成功"),t.content="",n.data.new_obj.is_liking=!1,t.commentList.unshift(n.data.new_obj);case 9:case"end":return e.stop()}}),e)})))()},zan:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.is_liking){n.next=5;break}return n.next=3,Object(s["d"])(t.com_id.toString());case 3:n.next=7;break;case 5:return n.next=7,Object(s["b"])(t.com_id.toString());case 7:e.$toast.success("操作成功"),t.is_liking=!t.is_liking;case 9:case"end":return n.stop()}}),n)})))()},showReply:function(t){this.isShowReply=!0,this.currentComment=t},addCount:function(){this.currentComment.reply_count++}}},w=k,x=(n("c9a1"),Object(v["a"])(w,u,d,!1,null,"4f5709f9",null)),y=x.exports,j={name:"Article",components:{Comment:y},data:function(){return{artDetail:{},loading:!0}},computed:Object(o["a"])({artId:function(){return this.$route.params.id}},Object(l["d"])("user",["token"])),created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["h"])(t.artId);case 2:n=e.sent,t.artDetail=n.data,t.loading=!1;case 5:case"end":return e.stop()}}),e)})))()},methods:{toggleFollow:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.token.token){e.next=4;break}return t.$toast.fail("请先登录"),t.$router.push({path:"/login",query:{goBack:!0}}),e.abrupt("return");case 4:if(!t.artDetail.is_followed){e.next=7;break}return e.next=7,Object(c["d"])(t.artDetail.aut_id);case 7:if(t.artDetail.is_followed){e.next=10;break}return e.next=10,Object(c["a"])(t.artDetail.aut_id);case 10:t.$toast.success("操作成功"),t.artDetail.is_followed=!t.artDetail.is_followed;case 12:case"end":return e.stop()}}),e)})))()},like:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.token.token){e.next=4;break}return t.$toast.fail("请先登录"),t.$router.push({path:"/login",query:{goBack:!0}}),e.abrupt("return");case 4:if(1!==t.artDetail.attitude){e.next=9;break}return e.next=7,Object(s["f"])(t.artId);case 7:e.next=11;break;case 9:return e.next=11,Object(s["l"])(t.artId);case 11:t.$toast.success("操作成功"),t.artDetail.attitude=1===t.artDetail.attitude?-1:1;case 13:case"end":return e.stop()}}),e)})))()},dislike:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.token.token){e.next=4;break}return t.$toast.fail("请先登录"),t.$router.push({path:"/login",query:{goBack:!0}}),e.abrupt("return");case 4:if(0!==t.artDetail.attitude){e.next=9;break}return e.next=7,Object(s["e"])(t.artId);case 7:e.next=11;break;case 9:return e.next=11,Object(s["g"])(t.artId);case 11:t.$toast.success("操作成功"),t.artDetail.attitude=0===t.artDetail.attitude?-1:0;case 13:case"end":return e.stop()}}),e)})))()}}},O=j,C=(n("bfe0"),Object(v["a"])(O,a,r,!1,null,"0e89fc52",null));e["default"]=C.exports},a82d:function(t,e,n){"use strict";n("d66b")},bfe0:function(t,e,n){"use strict";n("6be5")},c9a1:function(t,e,n){"use strict";n("cc39")},cc39:function(t,e,n){},d66b:function(t,e,n){}}]);
//# sourceMappingURL=chunk-035e6efe.8ecf30d1.js.map